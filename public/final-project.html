<!DOCTYPE html>
<html>
    <head>
        <title>JQuery Final</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
    </head>
    <body>

        <style>
            label > input{ /* HIDE RADIO */
                visibility: hidden; /* Makes input not-clickable */
                position: absolute; /* Remove input from document flow */
            }
            label > input + img, label > input + div { /* IMAGE STYLES */
                cursor:pointer;
                border:2px solid transparent;
            }
            label > input:checked + img, label > input:checked + div { /* (RADIO CHECKED) IMAGE STYLES */
                border:2px solid #f00;
            }
            img {
                width: 200px;
                height: 200px;
            }
        </style>


        <!-- ASSIGNMENT GUIDELINES / REQUIREMENTS -->

        <h1 class="container center">JQUERY FINAL PROJECT</h1>
        <div role="tablist" id="accordion" class="panel-group container">
            <div class="panel panel-default">
                <div id="headingOne" role="tab" class="panel-heading">
                    <h4 class="panel-title">
                        <a aria-controls="collapseOne" aria-expanded="false" href="#collapseOne" data-parent="#accordion" data-toggle="collapse" class="collapsed">
                            GOAL
                        </a>
                    </h4>
                </div>
                <div aria-labelledby="headingOne" role="tabpanel" class="panel-collapse collapse" id="collapseOne" aria-expanded="false" style="height: 0px;">
                    <div class="panel-body">
                        <p>As a user, I want to have fun answering an interactive quiz, and I expect the result to be based on my selections.</p>
                        <p>As a dev, I want to query Flickr JS API for photos based on my quiz topic.</p>
                        <p>As a dev, I want to query Facebook's Graph API for fans based on my quiz topic.</p>
                        <p>As a dev, I want to query Twitter's JS API for keyword search (with relative date) quiz topic.</p>
                    </div>
                </div>
            </div>


            <div class="panel panel-default">
                <div id="headingTwo" role="tab" class="panel-heading">
                    <h4 class="panel-title">
                        <a aria-controls="collapseTwo" aria-expanded="false" href="#collapseTwo" data-parent="#accordion" data-toggle="collapse" class="collapsed">
                            INSPIRATION
                        </a>
                    </h4>
                </div>
                <div aria-labelledby="headingTwo" role="tabpanel" class="panel-collapse collapse" id="collapseTwo" aria-expanded="false">
                    <div class="panel-body">
                        <p>Interactive quizes by <a href="http://www.buzzfeed.com/quizzes">Buzzfeed</a></p>
                    </div>
                </div>
            </div>


            <div class="panel panel-default">
                <div id="headingThree" role="tab" class="panel-heading">
                    <h4 class="panel-title">
                        <a aria-controls="collapseThree" aria-expanded="false" href="#collapseThree" data-parent="#accordion" data-toggle="collapse" class="collapsed">
                            EXPECTATIONS
                        </a>
                    </h4>
                </div>
                <div aria-labelledby="headingThree" role="tabpanel" class="panel-collapse collapse" id="collapseThree" aria-expanded="false">
                    <div class="panel-body">
                        <ul>
                            <li>Build a dynamic quiz with three questions. After the user submits the quiz the result should be reveal on the same page, below the questions. <i>(for 6 points)</i></li>
                            <li>The result is a fun conclusion to the user's answers based on your questions.</li>
                            <li>If the quiz is reloaded and completed a second time with non-repeatitive answers then the result should reflect the questions.</li>
                        </ul>
                    </div>
                </div>
            </div>


            <div class="panel panel-default">
                <div id="headingFour" role="tab" class="panel-heading">
                    <h4 class="panel-title">
                        <a aria-controls="collapseFour" aria-expanded="false" href="#collapseFour" data-parent="#accordion" data-toggle="collapse" class="collapsed">
                            STEPS
                        </a>
                    </h4>
                </div>
                <div aria-labelledby="headingFour" role="tabpanel" class="panel-collapse collapse" id="collapseFour" aria-expanded="false">
                    <div class="panel-body">
                        <ol>
                            <li>Display exactly 4 Flickr photos. Query Flickr by any criterion. <i>(for 4 points)</i></li>
                            <li>Display ~4 profile photos of a Facebook Page based on the photo likes. There are Page fans that like photos, display those user's profile photos. Any Facebook Page is allowed if it has those required fans. <i>(for 4 points)</i></li>
                            <li>Display exactly 4 Twitter tweets (status updates) with relative date (i.e. yesterday, 4 weeks ago). Query Twitter by any criterion. <i>(for 6 points)</i></li>
                        </ol>
                    </div>
                </div>
            </div>


            <div class="panel panel-default">
                <div id="headingFive" role="tab" class="panel-heading">
                    <h4 class="panel-title">
                        <a aria-controls="collapseFive" aria-expanded="false" href="#collapseFive" data-parent="#accordion" data-toggle="collapse" class="collapsed">
                            TECHNOLOGIES
                        </a>
                    </h4>
                </div>
                <div aria-labelledby="headingFive" role="tabpanel" class="panel-collapse collapse" id="collapseFive" aria-expanded="false">
                    <div class="panel-body">
                        <ul>
                            <li><a href="https://www.flickr.com/services/api/">Flickr JS API</a></li>
                            <li><a href="https://developers.facebook.com/docs/graph-api">Facebook Graph API</a></li>
                            <li><a href="https://dev.twitter.com/docs">Twitter JS API</a></li>
                            <li><a href="https://www.npmjs.com/package/twit">Twitter API client for node</a></li>
                            <li>JavaScript</li>
                            <li><a href="http://api.jquery.com/">jQuery</a></li>
                            <li><a href="http://api.jquery.com/jQuery.ajax/">jQuery AJAX</a></li>
                            <li><a href="http://nodejs.org/">node.js</a></li>
                            <li><a href="http://hapijs.com/">hapi.js</a></li>
                        </ul>
                    </div>
                </div>
            </div>


            <div class="panel panel-default">
                <div id="headingSix" role="tab" class="panel-heading">
                    <h4 class="panel-title">
                        <a aria-controls="collapseThree" aria-expanded="false" href="#collapseSix" data-parent="#accordion" data-toggle="collapse" class="collapsed">
                            GRADING
                        </a>
                    </h4>
                </div>
                <div aria-labelledby="headingSix" role="tabpanel" class="panel-collapse collapse" id="collapseSix" aria-expanded="false">
                    <div class="panel-body">
                        <ul>
                            <li>For point breakdown consult the <a href="#Expectations">Expectations</a> section. <i>3 additional points</i> for completing all of the expectations.  For a total of twenty five points for this final project.</li>
                            <li>Deadline is Feb 27th at 23:59 Pacific.  <b>Submission details</b> <i>2 points</i> will be provided for an on-time delivery to <a href="mailto:dan@vanarts.com">dan@vanarts.com</a>.  2 points will be deducted from your total for every late 24-hour day.</li>
                        </ul>
                    </div>
                </div>
            </div>


        </div>
        <BR>














        <!-- SOLUTION -->


        <h1 class="container center">DUBAI, OBVIOUSLY</h1>

        <br>

        <!-- FLICKR -->
        <div id="quizzie">
            <div class="container center center-block well well-lg">
                <div class="row">
                    <div class="quiz-step step1 col-md-12" id="flickr">
                        <h3>Which place would you visit first?</h3>
                        <br>
                        <div class="col-md-3">
                            <label>
                                <input class="quiz-answer" type="radio" name="q1" value="1">
                                <img src="http://placehold.it/200x200" id="flickr1" alt="">
                            </label>
                        </div>
                        <div class="col-md-3">
                            <label>
                                <input class="quiz-answer" type="radio" name="q1" value="2">
                                <img src="http://placehold.it/200x200" id="flickr2" alt="">
                            </label>
                        </div>
                        <div class="col-md-3">
                            <label>
                                <input class="quiz-answer" type="radio" name="q1" value="3">
                                <img src="http://placehold.it/200x200" id="flickr3" alt="">
                            </label>
                        </div>
                        <div class="col-md-3">
                            <label>
                                <input class="quiz-answer" type="radio" name="q1" value="4">
                                <img src="http://placehold.it/200x200" id="flickr4" alt="">
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <br>


            <!-- FACEBOOK -->

            <div class="container center center-block well well-lg">
                <div class="row">
                    <div class="quiz-step step2 col-md-12"  id="facebook">
                        <h3>Who would you take on a trip to Dubai?</h3>
                        <br>
                        <div class="col-md-3 high-value">
                            <label class="low-value">
                                <input class="quiz-answer" type="radio" name="q2" value="1">
                                <img src="http://placehold.it/200x200" id="fb1" alt="">
                            </label>
                        </div>
                        <div class="col-md-3">
                            <label class="low-value">
                                <input class="quiz-answer" type="radio" name="q2" value="2">
                                <img src="http://placehold.it/200x200" id="fb2" alt="">
                            </label>
                        </div>
                        <div class="col-md-3">
                            <label class="high-value">
                                <input class="quiz-answer" type="radio" name="q2" value="3">
                                <img src="http://placehold.it/200x200" id="fb3" alt="">
                            </label>
                        </div>
                        <div class="col-md-3">
                            <label class="low-value">
                                <input class="quiz-answer" type="radio" name="q2" value="4">
                                <img src="http://placehold.it/200x200" id="fb4" alt="">
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TWITTER -->

            <div class="container center center-block well well-lg">
                <div class="row">
                    <div class="quiz-step step3 col-md-12" id="twitter">
                        <h3>Pick a tweet, any tweet</h3>
                        <br>
                        <div id="tweet" class="col-md-3">
                            <label>
                                <input class="quiz-answer" type="radio" name="q3" value="1">
                                    <span class="twt1"></span>
                                    <Br></br>
                                    <span class="date1"></span>
                            </label>
                        </div>
                        <div class="col-md-3">
                            <label>
                                <input class="quiz-answer" type="radio" name="q3" value="2">
                                    <span class="twt2"></span>
                                    <Br></br>
                                    <span class="date2"></span>
                            </label>
                        </div>
                        <div class="col-md-3">
                            <label>
                                <input class="quiz-answer" type="radio" name="q3" value="3">
                                    <span class="twt3"></span>
                                    <Br></br>
                                    <span class="date3"></span>
                            </label>
                        </div>
                        <div class="col-md-3">
                            <label>
                                <input class="quiz-answer" type="radio" name="q3" value="4">
                                    <span class="twt4"></span>
                                    <Br></br>
                                    <span class="date4"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>


            <div class="container center center-block well well-lg">
                <div class="row">
                    <div id="results" class="col-md-12">
                        <h2>You're Image is ...............</h2>
                        <div class="result-options">
                            <p class="result-1">Result 1</p>
                            <p class="result-2">Result 2</p>
                            <p class="result-3">Result 3</p>
                            <p class="result-4">Result 4</p>
                            <p class="result-5">Result 5</p>
                        </div>
                    </div>
                </div>
            </div>

            <br>
        </div>


        <!-- jQuery library -->
        <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

        <!-- Flickr API global variables -->
        <script src="shared/credentials.js"></script>
        <script src="shared/flickr.js"></script>


        <!-- Page specic code -->
        <script>

            //* Flickr *//

            myflickrOptions.data.api_key = credentials.flickr.api_key;
            myflickrOptions.data.user_id = credentials.flickr.user_id;
            $.ajax({
                "url": myflickrOptions.url,
                "data": myflickrOptions.data,
                "success": function (response) {
                    var html = '';
                    photoSrc = createJpgPath(response.photos.photo);
                    for (var i = 0, len = photoSrc.length; i < len; i++) {
                        html = "<img src='" + photoSrc[i] + "'>";
                        var selector = '#flickr' + (i + 1);
                        $(selector).replaceWith(html);
                    }
                }
            });

            ///////////////////////************************///////////////////////////

            //* Facebook *//

            $.ajax({
                url: 'http://graph.facebook.com/abhishek.gyaneshwar/picture',
                success: function (response) {
                    var output = "<img src='http://graph.facebook.com/abhishek.gyaneshwar/picture'>" + "<br></br>";
                    $('#fb1').replaceWith(output);
                }
            });
            $.ajax({
                url: 'http://graph.facebook.com/WataruOguchi/picture',
                success: function (response) {
                    var output = "<img src='http://graph.facebook.com/WataruOguchi/picture'>" + "<br></br>";
                    $('#fb2').replaceWith(output);
                }
            });
            $.ajax({
                url: 'http://graph.facebook.com/melanie.pellegrino.94/picture',
                success: function (response) {
                    var output = "<img src='http://graph.facebook.com/melanie.pellegrino.94/picture'>" + "<br></br>";
                    $('#fb3').replaceWith(output);
                }
            });
            $.ajax({
                url: 'http://graph.facebook.com/troy.strachan/picture',
                success: function (response) {
                    var output = "<img src='http://graph.facebook.com/troy.strachan/picture'>" + "<br></br>";
                    $('#fb4').replaceWith(output);
                }
            });

            ///////////////////////************************///////////////////////////


            //* Twitter *//

            $.ajax({
                url: '/twitter',
                success: function (response) {

                    $('.twt1').append(response[0].tweet);
                    $('.twt2').append(response[1].tweet);
                    $('.twt3').append(response[2].tweet);
                    $('.twt4').append(response[3].tweet);

                    $('.date1').append(response[0].tweetDate);
                    $('.date2').append(response[1].tweetDate);
                    $('.date3').append(response[2].tweetDate);
                    $('.date4').append(response[3].tweetDate);
                }
            });
            ///////////////////////************************///////////////////////////


            //* Quiz Results *//
            //
            //
            // Quiz result options in a separate object for flexibility


            var results = {q1: null, q2: null, q3: null},
            showAnswer = function () {
                //show result section
                $('#result h2').css('display', 'none');
                $('#result-options').css('visibility', 'visible');

                //generate a code by each answer
                /* e.g.
                 Question 1: Answer = '2'
                 Question 2: Answer = '1'
                 Question 3: Answer = '4'
                 resultCode = 214
                 */
                var resultCode = $.map(results, function (value) {
                    return value;
                }).join("");

                //TODO: Ask Dan, Should I use DOM tree?
                //reset the result
                $('.hide').css('display', 'none');

                //show the result based on the code just generated
                $('#result-text-' + resultCode).css('display', 'block');
                $('#result-image-' + resultCode).css('display', 'block');
            },
                    answered = function () {
                        var answered = true;
                        $.each(results, function (index, val) {
                            if (val == null) {
                                answered = false;
                            }
                        });
                        return answered;
                    },
                    setResult = function (section, questionName) {
                        // set an answer into results
                        results[questionName] = $('input[name="' + questionName + '"]:checked', section).val();
                        answered() ? showAnswer() : null;
                    };

            $('#flickr').on('change', function () {
                setResult(this, 'q1');
            });
            $('#facebook').on('change', function () {
                setResult(this, 'q2');
            });
            $('#twitter').on('change', function () {
                setResult(this, 'q3');
            });

            jQuery(document).ready(function ($) {
                $('.form-group').children('label').find("input:radio:checked").prop({checked: false});
            });
        </script>

        <style>
            #result-section {
                visibility: hidden;
            }
            #result-section > .well > div {
                display: none;
            }

        </style>


    </body>
</html>